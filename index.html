<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS-Asincronico Demo</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Syne:wght@400;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
    <div class="badge">DEMO INTERACTIVA</div>
    <h1>JavaScript <span>As√≠ncrono</span></h1>
    <p class="subtitle">Explora callbacks, promesas y async/await. Presiona los botones para ver c√≥mo se ejecuta cada uno en tiempo real.</p>
  </header>

  <!-- ===== SECCI√ìN 1: CALLBACK ===== -->
  <div class="section">
    <div class="section-header">
      <span class="section-num">01</span>
      <span class="section-title">Callback</span>
      <span class="tag tag-old">CL√ÅSICO</span>
    </div>
    <div class="section-body">
      <div class="code-block">
        <div class="code-topbar">
          <span class="dot dot-r"></span><span class="dot dot-y"></span><span class="dot dot-g"></span>
          <span class="code-label">callback.js</span>
        </div>
        <pre><span class="cm">// Una funci√≥n que simula una tarea lenta</span>
<span class="kw">function</span> <span class="fn">tareaLenta</span>(nombre, tiempo, <span class="hl">callback</span>) {
  console.log(<span class="str">`‚ñ∂ Iniciando: ${nombre}`</span>)

  <span class="fn">setTimeout</span>(<span class="kw">function</span>() {
    <span class="hl">callback</span>(<span class="str">`‚úì ${nombre} completada`</span>)
  }, tiempo)
}

<span class="cm">// Usando el callback</span>
<span class="fn">tareaLenta</span>(<span class="str">"Descargar datos"</span>, <span class="num">2000</span>, <span class="kw">function</span>(res) {
  console.log(res)
  <span class="cm">// Otro callback dentro ‚Üí "Callback Hell"</span>
  <span class="fn">tareaLenta</span>(<span class="str">"Procesar datos"</span>, <span class="num">1000</span>, <span class="kw">function</span>(res2) {
    console.log(res2)
  })
})

console.log(<span class="str">"‚ö° C√≥digo s√≠ncrono sigue corriendo..."</span>)</pre>
      </div>
      <div class="output-panel">
        <div class="output-box">
          <div class="output-topbar">
            <span><span class="status-dot" id="cb-dot"></span>CONSOLA</span>
            <button class="btn btn-amber" id="btn-cb" onclick="runCallback()">‚ñ∂ EJECUTAR</button>
          </div>
          <div class="output-content" id="out-cb">
            <span style="color:#1e293b">// Presiona EJECUTAR para ver la salida...</span>
          </div>
        </div>
        <div class="callout">
          <strong>‚ö† Callback Hell:</strong> Anidar callbacks dentro de callbacks hace el c√≥digo dif√≠cil de leer y mantener. Por eso surgieron las Promesas.
        </div>
      </div>
    </div>
  </div>

  <!-- ===== SECCI√ìN 2: PROMISE ===== -->
  <div class="section">
    <div class="section-header">
      <span class="section-num">02</span>
      <span class="section-title">Promise (Promesa)</span>
      <span class="tag tag-mid">MODERNO</span>
    </div>
    <div class="section-body">
      <div class="code-block">
        <div class="code-topbar">
          <span class="dot dot-r"></span><span class="dot dot-y"></span><span class="dot dot-g"></span>
          <span class="code-label">promise.js</span>
        </div>
        <pre><span class="kw">function</span> <span class="fn">tareaPromesa</span>(nombre, tiempo, exito) {
  <span class="kw">return new</span> <span class="hl">Promise</span>((resolve, reject) => {
    console.log(<span class="str">`‚ñ∂ Iniciando: ${nombre}`</span>)
    <span class="fn">setTimeout</span>(() => {
      <span class="kw">if</span> (exito) {
        <span class="fn">resolve</span>(<span class="str">`‚úì ${nombre} completada`</span>)
      } <span class="kw">else</span> {
        <span class="fn">reject</span>(<span class="str">`‚úó ${nombre} fall√≥`</span>)
      }
    }, tiempo)
  })
}

<span class="cm">// Encadenando con .then() / .catch()</span>
<span class="fn">tareaPromesa</span>(<span class="str">"Descargar"</span>, <span class="num">1500</span>, <span class="kw">true</span>)
  .<span class="fn">then</span>(res => {
    console.log(res)
    <span class="kw">return</span> <span class="fn">tareaPromesa</span>(<span class="str">"Procesar"</span>, <span class="num">1000</span>, <span class="kw">true</span>)
  })
  .<span class="fn">then</span>(res => console.log(res))
  .<span class="fn">catch</span>(err => console.log(err))

console.log(<span class="str">"‚ö° C√≥digo s√≠ncrono contin√∫a..."</span>)</pre>
      </div>
      <div class="output-panel">
        <div class="output-box">
          <div class="output-topbar">
            <span><span class="status-dot" id="pr-dot"></span>CONSOLA</span>
            <div style="display:flex;gap:0.5rem;">
              <button class="btn btn-purple" id="btn-pr-ok"  onclick="runPromise(true)">‚ñ∂ √âXITO</button>
              <button class="btn btn-amber"  id="btn-pr-err" onclick="runPromise(false)">‚úó ERROR</button>
            </div>
          </div>
          <div class="output-content" id="out-pr">
            <span style="color:#1e293b">// Prueba √âXITO o ERROR...</span>
          </div>
        </div>
        <div class="callout">
          <strong>Estados de una Promise:</strong> <span style="color:#f59e0b">pending</span> ‚Üí en espera ¬∑ <span style="color:var(--accent1)">fulfilled</span> ‚Üí resuelta ¬∑ <span style="color:#ef4444">rejected</span> ‚Üí rechazada
        </div>
      </div>
    </div>
  </div>

  <!-- ===== SECCI√ìN 3: ASYNC/AWAIT ===== -->
  <div class="section">
    <div class="section-header">
      <span class="section-num">03</span>
      <span class="section-title">Async / Await</span>
      <span class="tag tag-new">RECOMENDADO</span>
    </div>
    <div class="section-body">
      <div class="code-block">
        <div class="code-topbar">
          <span class="dot dot-r"></span><span class="dot dot-y"></span><span class="dot dot-g"></span>
          <span class="code-label">async-await.js</span>
        </div>
        <pre><span class="kw">function</span> <span class="fn">esperar</span>(ms) {
  <span class="kw">return new</span> <span class="hl">Promise</span>(res => <span class="fn">setTimeout</span>(res, ms))
}

<span class="cm">// async hace que la funci√≥n retorne una Promise</span>
<span class="kw">async function</span> <span class="fn">procesarDatos</span>() {
  <span class="kw">try</span> {
    console.log(<span class="str">"‚ñ∂ Paso 1: Conectando..."</span>)
    <span class="kw">await</span> <span class="fn">esperar</span>(<span class="num">1200</span>)
    console.log(<span class="str">"‚úì Paso 1: Conexi√≥n OK"</span>)

    console.log(<span class="str">"‚ñ∂ Paso 2: Descargando..."</span>)
    <span class="kw">await</span> <span class="fn">esperar</span>(<span class="num">1500</span>)
    console.log(<span class="str">"‚úì Paso 2: Descarga OK"</span>)

    console.log(<span class="str">"‚ñ∂ Paso 3: Procesando..."</span>)
    <span class="kw">await</span> <span class="fn">esperar</span>(<span class="num">800</span>)
    console.log(<span class="str">"‚úì Proceso completado üéâ"</span>)

  } <span class="kw">catch</span> (error) {
    console.log(<span class="str">`‚úó Error: ${error}`</span>)
  }
}

<span class="fn">procesarDatos</span>()
console.log(<span class="str">"‚ö° Esto se imprime antes de los pasos"</span>)</pre>
      </div>
      <div class="output-panel">
        <div class="output-box">
          <div class="output-topbar">
            <span><span class="status-dot" id="aw-dot"></span>CONSOLA</span>
            <button class="btn" id="btn-aw" onclick="runAsync()">‚ñ∂ EJECUTAR</button>
          </div>
          <div class="output-content" id="out-aw">
            <span style="color:#1e293b">// Presiona EJECUTAR para ver la salida...</span>
          </div>
        </div>
        <div class="callout">
          <strong>await</strong> pausa la ejecuci√≥n <em>dentro</em> de la funci√≥n async, pero no bloquea el resto del programa. Es como usar <code style="color:var(--accent1)">.then()</code> pero con sintaxis de c√≥digo normal.
        </div>
      </div>
    </div>
  </div>

  <!-- ===== SECCI√ìN 4: COMPARACI√ìN ===== -->
  <div class="section">
    <div class="section-header">
      <span class="section-num">04</span>
      <span class="section-title">Comparaci√≥n &amp; Timeline</span>
      <span class="tag tag-comp">COMPARATIVA</span>
    </div>
    <div class="section-body full">
      <table class="compare-table">
        <thead>
          <tr>
            <th>T√âCNICA</th>
            <th>LEGIBILIDAD</th>
            <th>MANEJO DE ERRORES</th>
            <th>ANIDACI√ìN</th>
            <th>USO HOY</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Callback</td>
            <td><span class="pill pill-r">Baja</span></td>
            <td><span class="pill pill-r">Manual</span></td>
            <td><span class="pill pill-r">Callback Hell</span></td>
            <td><span class="pill pill-y">Legado</span></td>
          </tr>
          <tr>
            <td>Promise</td>
            <td><span class="pill pill-y">Media</span></td>
            <td><span class="pill pill-g">.catch()</span></td>
            <td><span class="pill pill-y">Encadenado</span></td>
            <td><span class="pill pill-g">Com√∫n</span></td>
          </tr>
          <tr>
            <td>Async/Await</td>
            <td><span class="pill pill-g">Alta</span></td>
            <td><span class="pill pill-g">try/catch</span></td>
            <td><span class="pill pill-g">Lineal</span></td>
            <td><span class="pill pill-g">Recomendado</span></td>
          </tr>
        </tbody>
      </table>

      <div style="margin-top:1.5rem;">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:0.75rem;">
          <span style="font-family:'Space Mono',monospace;font-size:0.7rem;color:var(--muted);">TIMELINE DE EJECUCI√ìN</span>
          <button class="btn" style="font-size:0.65rem;padding:0.4rem 0.8rem;" onclick="animateTimeline()">‚ñ∂ ANIMAR</button>
        </div>
        <div class="timeline">
          <div class="tl-row">
            <span class="tl-label">sync code</span>
            <div class="tl-bar-wrap">
              <div class="tl-bar" id="tl-sync" style="background: linear-gradient(90deg,#60a5fa,#3b82f6); width:15%;">c√≥digo sync</div>
            </div>
          </div>
          <div class="tl-row">
            <span class="tl-label">callback</span>
            <div class="tl-bar-wrap">
              <div class="tl-bar" id="tl-cb" style="background: linear-gradient(90deg,#f59e0b,#d97706); width:70%;margin-left:15%;">espera en Task Queue</div>
            </div>
          </div>
          <div class="tl-row">
            <span class="tl-label">promise</span>
            <div class="tl-bar-wrap">
              <div class="tl-bar" id="tl-pr" style="background: linear-gradient(90deg,#a78bfa,#7c3aed); width:65%;margin-left:15%;">Microtask Queue (prioridad alta)</div>
            </div>
          </div>
          <div class="tl-row">
            <span class="tl-label">async/await</span>
            <div class="tl-bar-wrap">
              <div class="tl-bar" id="tl-aw" style="background: linear-gradient(90deg,#00f5a0,#00b36b); width:65%;margin-left:15%;">Microtask Queue (prioridad alta)</div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <footer>JS ASYNC DEMO ‚Äî Para uso educativo ¬∑ Bootcamp JavaScript Trainne</footer>
</div>


    <script src="script.js"></script>
</body>
</html>